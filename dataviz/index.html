<!DOCTYPE html>
<html>
  <head>
    <title>Promise Zones</title>
    <meta charset="utf-8">
    <script src="http://d3js.org/d3.v3.min.js"></script> 
	<script src="colorbrewer.js"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <style type="text/css">
    
    	#graph {
    		width: 960px;
    		height: 500px;
    	}
    	g {
    		stroke-width: 1;
    	}
    	
    </style>
    <script>
    	var opts = {
    			margin : { top: 10, right: 10, bottom: 50, left: 50 }
    			
    	}

		function draw(data) {
		
			// x-axis is unemployment rate
			var x_axis_scale = 0
			
			// y-axis is poverty rate
			
			
			var vis = d3.select('#graph')
			//var xRange = d3.scale.linear().range([0, 800]).domain([0,.5]);
  			//var yRange = d3.scale.linear().range([450, 40]).domain([0,.5]);
  			var xRange = d3.scale
  				.linear()
  				.range([0, 800])
  				.domain([0, d3.max(data, function(d) {
  					return d.ue_rate;
  				})]);
  			var yRange = d3.scale
  				.linear()
  				.range([450, 40])
  				.domain([0, d3.max(data, function(d) { 
  					return d.pv_rate; 
  				})]);
  			
  			var xAxis = d3.svg.axis().scale(xRange).tickFormat(d3.format("%"));
  			var yAxis = d3.svg.axis().scale(yRange).tickFormat(d3.format("%")).orient("left");
  			vis.append("svg:g").call(xAxis).attr("transform", "translate(40,450)");
  			vis.append("svg:g").call(yAxis).attr("transform", "translate(40, 0)");
			
			var multiplier = 1/8000
			// circle size is population
			var circles = vis.selectAll("circle")
				.data(data)
    			.enter()
    			.insert("circle")
    			.attr("cx", function(d) { return xRange (d.ue_rate); })
    			.attr("cy", function(d) { return yRange (d.pv_rate); })
    			.attr("r", function(d) { return multiplier * d.pop; })
    			.style("fill", "blue")
    			.style("fill", function(d) {
    				d.pz ? return "red" : return "blue"
    			});
			
			// color is based on isPromiseZone
		}
		d3.json('../areas.json', draw);
    </script>
	</head>
	<body>
		<div id='svg-container'>
			<svg id='graph'>
			
			</svg>
		</div>
	</body>
</html>